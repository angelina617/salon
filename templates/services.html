{% extends 'base.html' %}
{% load static %}

{% block title %}{{ page_title|default:"Услуги - Салон красоты TanGel" }}{% endblock %}

{% block content %}
<div class="services-hero">
    <h1>{{ hero_title|default:"Наши услуги" }}</h1>
    <p>{{ hero_subtitle|default:"Полный спектр beauty-услуг от профессионалов с использованием премиальной косметики" }}</p>
</div>


{{ context }}

{% if categories %}
    <div class="services-categories">
        {% for category in categories %}
        <section id="category-{{ category.slug }}" class="service-category">
            <h2>{{ category.name }}</h2>
            {% if category.description %}
                <p>{{ category.description }}</p>
            {% endif %}

            {% if category.services.all %}
                <div class="services-list">
                    {% for service in category.services.all %}
                        {% if service.is_active %}
                        <div id="service-{{ service.id }}" class="service-item">
                            <div class="service-header">
                                <h3>{{ service.name }}</h3>
                                <div class="service-meta">
                                    <span class="price">{{ service.price|floatformat:0 }} ₽</span>
                                    <span class="duration">{{ service.duration|default:"60" }} мин</span>
                                </div>
                            </div>
                            <p>{{ service.description|truncatechars:150 }}</p>

                            {% if service.features %}
                                <ul class="service-features">
                                    {% for feature in service.features_as_list %}
                                        <li>{{ feature }}</li>
                                    {% endfor %}
                                </ul>
                            {% endif %}

                            <div class="service-actions">
                                <a href="{% url 'booking' %}?service={{ service.slug }}" class="btn">Записаться</a>
                                {% if user.is_staff %}
                                    <a href="{% url 'admin:services_service_change' service.id %}" class="btn-outline">Редактировать</a>
                                {% endif %}
                            </div>
                        </div>
                        {% endif %}
                    {% empty %}
                        <p>В этой категории пока нет услуг</p>
                    {% endfor %}
                </div>
            {% else %}
                <p>В этой категории пока нет услуг</p>
            {% endif %}
        </section>
        {% endfor %}
    </div>
{% else %}
    <div class="no-categories">
        <h3>Категории услуг пока не добавлены</h3>
    </div>
{% endif %}

<section class="services-cta">
    <h2>{{ cta_title|default:"Готовы преобразиться?" }}</h2>
    <p>{{ cta_text|default:"Запишитесь на любую услугу онлайн и получите скидку 10% на первую запись!" }}</p>
    <a href="{% url 'booking' %}" class="btn">Записаться онлайн</a>
</section>
{% endblock %}